<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="cheer up"><meta name="baidu-site-verification" content="9pSIuwCbvi"><meta name="google-site-verification" content="YzcCTjF6VoVlNAtL37_S4vFjzFwYTAFZzD51Il2IGKY"><title>æ‰‹æ’•mAP | WenHuiZhou</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">æ‰‹æ’•mAP</h1><a id="logo" href="/.">WenHuiZhou</a><p class="description">perperï¼ˆæ‰“èµ·ç²¾ç¥ï¼ï¼‰</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">æ‰‹æ’•mAP</h1><div class="post-meta">Mar 22, 2019<span> | </span><span class="category"><a href="/categories/æ‰‹æ’•ç³»åˆ—/">æ‰‹æ’•ç³»åˆ—</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span></div><a class="disqus-comment-count" href="/2019/03/22/æ‰‹æ’•mAP/#vcomment"><span class="valine-comment-count" data-xid="/2019/03/22/æ‰‹æ’•mAP/"></span><span> æ¡è¯„è®º</span></a><div class="post-content"><p>mAPåœ¨å¾ˆå¤šæ£€æµ‹ä»»åŠ¡ä¸­ä½¿ç”¨ååˆ†é¢‘ç¹ï¼Œå¾®è½¯çš„COCOæ•°æ®é›†ä¸“é—¨æä¾›äº†ä¸€å¥—APIï¼Œå®ç°é¢„æµ‹æ¨¡å‹çš„mAPè®¡ç®—ï¼ˆpycocotoolsï¼‰ï¼Œæœ¬ç¯‡æ–‡ç« æ‰“ç®—ç”¨æœ€åŸå§‹çš„æ–¹å¼æ‰‹æ’•mAPï¼Œå¸Œæœ›ä½¿å¾—å¯¹æ•´ä¸ªæŒ‡æ ‡æ›´å¥½çš„ç†è§£ã€‚æ–‡ç« å‚è€ƒRetina-netï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ã€‚</p>
<a id="more"></a>
<h3 id="mAPæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#mAPæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="mAPæ˜¯ä»€ä¹ˆï¼Ÿ"></a>mAPæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>mAP</strong>ï¼š mean Average Precision, å³å„ç±»åˆ«APçš„å¹³å‡å€¼ï¼Œä¾‹å¦‚COCOæ•°æ®é›†ï¼Œå…±æœ‰80+1ç±»ï¼ˆèƒŒæ™¯ï¼‰ï¼Œå¯¹æ¯ä¸€ä¸ªç±»åˆ«çš„ç‰©ä½“æ±‚ä¸€ä¸ªAPï¼ŒmAPå³ä¸ºæ‰€æœ‰ç›®æ ‡APçš„å¹³å‡å€¼ã€‚</p>
<p><strong>AP</strong>ï¼šAPä¸ºPRæ›²çº¿ï¼ˆprecision-recallï¼‰ä¸xè½´å›´æˆçš„é¢ç§¯</p>
<p><strong>Pricision</strong>ï¼šTP/ï¼ˆTP+FPï¼‰ï¼Œå³é¢„æµ‹ä¸ºçœŸï¼ˆé¢„æµ‹ç»“æœæ”¾åé¢å³TPï¼‰å½“ä¸­ï¼ŒçœŸæ­£ä¸ºçœŸçš„æ¯”ä¾‹ã€‚</p>
<p><strong>Recall</strong>ï¼šTP/ï¼ˆTP+FNï¼‰ï¼Œå³é¢„æµ‹ä¸ºçœŸå½“ä¸­çœŸæ­£ä¸ºçœŸçš„ä¸ªæ•°ï¼Œå æ‰€æœ‰æ ·æœ¬ä¸­çœŸä¸ªæ•°çš„æ¯”ä¾‹ã€‚</p>
<p>å¯¹äºTPï¼ŒFPï¼ŒTNï¼ŒFNè¡¨ç¤ºå››ç§æƒ…å†µï¼Œå…¶ä¸­Tï¼ŒFæ˜¯ä»ç»“æœæ¥çœ‹ï¼Œæ˜¯å¦é¢„æµ‹æ­£ç¡®ã€‚Pï¼ŒNåˆ™æ˜¯ä»é¢„æµ‹æ¥çœ‹ï¼Œé¢„æµ‹æ­£è¯¯ã€‚</p>
<p><strong>TP</strong>ï¼šé¢„æµ‹æ˜¯å¯¹çš„ï¼Œé¢„æµ‹æ ·æœ¬ç»“æœä¸ºçœŸã€‚è¯¥ç±»æ ·æœ¬çš„ä¸ªæ•°</p>
<p><strong>FP</strong>ï¼šé¢„æµ‹æ˜¯é”™çš„ï¼Œé¢„æµ‹æ ·æœ¬ä¸ºçœŸã€‚è¯¥ç±»ä¸ªæ•°ã€‚</p>
<p><strong>TN</strong>ï¼šé¢„æµ‹æ˜¯å¯¹çš„ï¼Œé¢„æµ‹æ ·æœ¬ä¸ºå‡ã€‚è¯¥ç±»ä¸ªæ•°ã€‚</p>
<p><strong>FN</strong>ï¼šé¢„æµ‹æ˜¯é”™çš„ï¼Œé¢„æµ‹æ ·æœ¬ä¸ºå‡ã€‚è¯¥ç±»ä¸ªæ•°ã€‚</p>
<p><strong>çœŸå‡é‰´å®šï¼š</strong>å½“é¢„æµ‹è¾¹æ¡†ä¸GTçš„è¾¹æ¡†é‡åˆç¨‹åº¦ï¼ŒPASCALæ•°æ®é›†ä¸­ï¼Œè®¤ä¸ºIoUå¤§äº0.5è®¤ä¸ºæ˜¯çœŸï¼Œå°äº0.5è®¤ä¸ºæ˜¯å‡ã€‚</p>
<p><strong>IoUï¼š</strong>é¢„æµ‹è¾¹æ¡†ä¸GTè¾¹æ¡†çš„ é‡å é¢ç§¯/ä¸¤ä¸ªè¾¹æ¡†å¹¶é›†</p>
<p><strong>mAP-IoU[0.5, 0.95]</strong>ï¼šCOCOè¦æ±‚IOUé˜ˆå€¼åœ¨[0.5, 0.95]åŒºé—´å†…æ¯éš”0.05å–ä¸€æ¬¡ï¼Œå°†è¿™ä¸ªIoUä½œä¸ºçœŸå‡è¾¹æ¡†çš„è¯„åˆ¤è¾¹ç•Œã€‚å¯ä»¥è®¡ç®—å‡º10ä¸ªIoUä¸‹çš„mAPå€¼ï¼Œç„¶åè¿™10ä¸ªè¿˜è¦å†åšå¹³å‡ï¼Œå³ä¸ºæœ€åçš„mAPã€‚</p>
<h3 id="ç–‘é—®"><a href="#ç–‘é—®" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h3><p>æŒ‡æ ‡è™½ç„¶å¾ˆå¤šï¼Œä½†æ˜¯éƒ½æ˜¯å¾ˆç®€å•çš„æŒ‡æ ‡ï¼Œè€å¿ƒçš„ç†è§£ä¸€ä¸‹ï¼Œä¹Ÿä¸è¾›è‹¦çš„ã€‚çœ‹å®Œä¸Šé¢çš„æŒ‡æ ‡æœ‰å‡ ä¸ªç–‘é—®ï¼š</p>
<ol>
<li>IoUè®¡ç®—çš„æ—¶å€™éœ€è¦è¾¹æ¡†ä¸GTå¯¹åº”èµ·æ¥ï¼Œæ¯ä¸ªGTå¯¹åº”ä¸€ä¸ªè¾¹æ¡†åä¸å†å‚ä¸åé¢è¾¹æ¡†çš„åŒ¹é…ã€‚é‚£ä¹ˆä¸å“ªä¸ªGTè¾¹æ¡†å¯¹åº”å‘¢ï¼Œè¿™æ˜¯ä¸ªé—®é¢˜ï¼Ÿ<strong>ï¼ˆç½®ä¿¡åº¦+IoUæœ€å¤§ï¼‰</strong></li>
<li>APåœ¨è®¡ç®—çš„æ—¶å€™éœ€è¦è®¡ç®—APæ›²çº¿ä¸‹æ–¹çš„é¢ç§¯ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆç®—å‘¢ï¼Ÿ</li>
<li>è®¡ç®—precisionï¼Œrecallçš„æ—¶å€™éœ€è¦æ¯ä¸ªç±»å•ç‹¬ç®—ï¼Œç„¶åç”¨äºä¹‹åç®—APï¼Œæ„Ÿè§‰æ˜¯å‡ ä¸ªå¾ªç¯ï¼Œå¤–å¾ªç¯æ˜¯ä¸ªéå†ç±»åˆ«ï¼Œå†…å¾ªç¯å¯¹æ¯ä¸ªé¢„æµ‹è¾¹æ¡†åšä¸€ä¸‹å¾ªç¯ï¼Œå…·ä½“æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</li>
</ol>
<h3 id="å®ä½œ"><a href="#å®ä½œ" class="headerlink" title="å®ä½œ"></a>å®ä½œ</h3><p>è¿™ä¸€éƒ¨åˆ†å°†æŒ‰ç…§è¾“å…¥æ•°æ®ï¼Œæ•°æ®å¤„ç†ï¼Œè®¡ç®—IoUï¼Œè®¡ç®—Precisionï¼ŒRecallï¼Œè®¡ç®—APç­‰æ­¥éª¤ã€‚</p>
<p><strong>é¢„æµ‹ç»“æœæ•°æ®</strong>ï¼šå‡è®¾ç»è¿‡æ¨¡å‹é¢„æµ‹å¾—åˆ°ä¸€ä¸ªcsvæ ¼å¼çš„é¢„æµ‹ç»“æœï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/path/to/<span class="number">1.j</span>pg,<span class="number">10</span>,<span class="number">78</span>,<span class="number">25</span>,<span class="number">34</span>,face,<span class="number">0.9</span></span><br></pre></td></tr></table></figure>
<p>åˆ†åˆ«æ˜¯å›¾ç‰‡çš„ä½ç½®ï¼Œé¢„æµ‹çš„è¾¹æ¡†ï¼ˆå·¦ä¸Šï¼‰ï¼ˆx,y,w,h)ï¼Œlabelï¼Œä»¥åŠç½®ä¿¡åº¦ã€‚</p>
<p><strong>GTæ•°æ®</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/path/to/<span class="number">1.j</span>pg,<span class="number">15</span>,<span class="number">80</span>,<span class="number">30</span>,<span class="number">32</span>,face</span><br></pre></td></tr></table></figure>
<p>åˆ†åˆ«æ˜¯å›¾ç‰‡çš„ä½ç½®ï¼Œè¾¹æ¡†ä½ç½®ä»¥åŠæ ‡ç­¾ã€‚</p>
<p><strong>æ•°æ®å¤„ç†ï¼š</strong></p>
<p>ä¸ºäº†æ›´å¥½çš„è®¡ç®—æ¯ä¸€ä¸ªç±»åˆ«é¢„æµ‹çš„precisionä»¥åŠrecallï¼Œç›´è§‰ä¸Šæ¥è¯´ï¼Œåº”è¯¥éœ€è¦ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ ¼å¼æ–¹ä¾¿è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ç§æ ¼å¼è®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_detections = [img_index][label][box_index]</span><br></pre></td></tr></table></figure>
<p>æ„æ€ä¸ºæ¯ä¸€ä¸ªå›¾ç‰‡ï¼Œå¯¹åº”è‹¥å¹²ä¸ªlabelï¼ˆä¾‹å¦‚ä¸€å¼ å›¾ä¸Šå¯¹åº”æ¡Œå­ï¼Œäººï¼‰ï¼Œæ¯ä¸ªlabelå¯¹åº”è‹¥å¹²ä¸ªè¾¹æ¡†ï¼Œï¼ˆä¾‹å¦‚ä¸€å¼ å›¾ç‰‡ä¸­æœ‰å¤šä¸ªäººï¼‰ã€‚</p>
<p>å› æ­¤ç¬¬ä¸€æ­¥éœ€è¦æŠŠcsvæ ¼å¼çš„æ•°æ®è½¬æ¢ä¸ºä¸Šé¢çš„æ ¼å¼ï¼Œåœ¨è½¬æ¢ä¹‹å‰éœ€è¦å€ŸåŠ©é“dcitå­—å…¸ã€‚ç›®çš„æ˜¯ä¸ºäº†å¯¹ç›¸åŒçš„å›¾ç‰‡çš„labelã€‚boxesè¿›è¡Œæ±‡æ€»ã€‚dictçš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  img1:&#123;label1:[[box1],[box2]...],label2:[[box1],[box2]...]..&#125;</span><br><span class="line">  img2:&#123;label1:[[box1]]&#125;</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure>
<p>å³å¤–å›´æ˜¯ä¸€ä¸ªlist[],ä¿å­˜æ¯ä¸€å¼ å›¾ç‰‡çš„ä¿¡æ¯ã€‚æ¯ä¸ªå›¾ç‰‡æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œkeyä¸ºå›¾ç‰‡åï¼Œvalæ˜¯å¦ä¸€ä¸ªä¿å­˜labelå’Œboxesçš„å­—å…¸ï¼Œè¿™ä¸ªå­—å…¸çš„keyä¸ºlabelåï¼Œvalä¸ºå¤šä¸ªboxesçš„listç»“æ„ã€‚</p>
<p>ä¸‹é¢ä»£ç æ˜¯è¯»å–csvæ–‡ä»¶ï¼Œå¹¶å°†æ•°æ®è½¬åŒ–ä¸ºä¸Šè¯‰æ ¼å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">img_name = &#123;&#125;     <span class="comment"># imgId: 1</span></span><br><span class="line">boxes_label_scores = &#123;&#125; <span class="comment"># imgId: [[x,y,w,h,score],...]</span></span><br><span class="line">class_num = <span class="number">1</span> <span class="comment"># è¡¨ç¤ºç±»åˆ«ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">pre_gt_csv = <span class="string">'score_mintest.csv'</span></span><br><span class="line">   </span><br><span class="line"><span class="keyword">with</span> open(pre_gt_csv,<span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">   reader = csv.reader(f)</span><br><span class="line">   lines = list(reader)</span><br><span class="line">   <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">       <span class="keyword">if</span> len(line) &lt; <span class="number">7</span>:</span><br><span class="line">            line.append(<span class="string">'1'</span>) <span class="comment"># å½“ä¸ºGTçš„æ—¶å€™ï¼Œæœ€åéœ€è¦æ·»ä¸Šç½®ä¿¡åº¦ä¸º1</span></span><br><span class="line">       <span class="keyword">if</span> float(line[<span class="number">-1</span>]) &lt; score_threshold:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">       <span class="keyword">if</span> line[<span class="number">0</span>] <span class="keyword">not</span> <span class="keyword">in</span> img_name.keys():</span><br><span class="line">            img_name[line[<span class="number">0</span>]] = <span class="number">1</span></span><br><span class="line">            temp = line[<span class="number">1</span>:<span class="number">5</span>]</span><br><span class="line">            temp.append(line[<span class="number">-1</span>])       <span class="comment"># [x,y,w,h,score]</span></span><br><span class="line">            box_dict = &#123;&#125;</span><br><span class="line">            box_dict[line[<span class="number">5</span>]] = [temp]  <span class="comment"># label:[[],[]]</span></span><br><span class="line">              <span class="comment">#&#123;img: &#123;label_name:[x,y,w,h,socre],[x2,y2,w2,h2,score2]...&#125;,img:&#123;...&#125;.. &#125;</span></span><br><span class="line">            boxes_label_scores[line[<span class="number">0</span>]] = box_dict</span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># the image is exist</span></span><br><span class="line">            temp = line[<span class="number">1</span>:<span class="number">5</span>]</span><br><span class="line">            temp.append(line[<span class="number">-1</span>])</span><br><span class="line">            <span class="keyword">if</span> line[<span class="number">5</span>] <span class="keyword">in</span> boxes_label_scores[line[<span class="number">0</span>]].keys():</span><br><span class="line">                boxes_label_scores[line[<span class="number">0</span>]]    [line[<span class="number">5</span>]].append(temp)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                boxes_label_scores[line[<span class="number">0</span>]][line[<span class="number">5</span>]] = [temp]</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿›è¡Œè¾¹æ¡†å¯¹æ¯”çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›å¯¹ç½®ä¿¡åº¦é«˜çš„è¾¹æ¡†æå‰è¿›è¡ŒIoUçš„åˆ¤æ–­ï¼Œå› æ­¤å¯¹boxes_label_scoresä¸­çš„boxesè¿›è¡Œç½®ä¿¡åº¦çš„æ’åº<strong>(è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜)</strong>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> boxes_label_scores:</span><br><span class="line">    labels = boxes_label_scores[img]</span><br><span class="line">    <span class="keyword">for</span> label <span class="keyword">in</span> labels.keys():</span><br><span class="line">        boxes = boxes_label_scores[img][label]</span><br><span class="line">        boxes = sorted(boxes,  key=<span class="keyword">lambda</span> x: float(x[<span class="number">-1</span>]),reverse=<span class="keyword">True</span>)</span><br><span class="line">        boxes_label_scores[img][label] = boxes</span><br></pre></td></tr></table></figure>
<p>ç”±äºä¸Šé¢å­—å…¸çš„ç»“æ„ï¼Œkeyä¸labelå‡ä¸ºçœŸå®å€¼ï¼Œç„¶åæˆ‘ä»¬å¸Œæœ›ç”¨all_detectionsè¿™ä¸ªlistçš„ç»“æ„æ¥ä»£æ›¿ï¼Œå› æ­¤éœ€è¦å¼•å…¥å›¾ç‰‡ä¸ä¸‹æ ‡ï¼Œlabelä¸ä¸‹æ ‡çš„ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚</p>
<p><strong>å›¾ç‰‡ä¸ä¸‹æ ‡å¯¹åº”ï¼š</strong>æˆ‘ä»¬å¯¹æµ‹è¯•é›†ä¸­è¯»å–çš„å›¾ç‰‡ä»ä¸Šåˆ°ä¸‹ï¼Œä¾æ¬¡è¿›è¡Œè®¡æ•°ã€‚è¯¥æ•°å¯¹åº”è¯¥å›¾ç‰‡çš„Idï¼ˆåˆ‡è®°ï¼Œåœ¨è¿›è¡ŒGTæ¯”è¾ƒæ—¶ï¼Œé¡ºåºä¸èƒ½ä¹±ï¼‰ã€‚</p>
<p><strong>labelä¸ä¸‹æ ‡å¯¹åº”ï¼š</strong> å°†å…¶è½¬åŒ–ä¸ºä¸‹æ ‡ï¼Œä»0å¼€å§‹ä¸€æ¬¡è¿›è¡Œè®¡æ•°ã€‚</p>
<p>ä¹Ÿå¯ä»¥ä¸“é—¨ç”Ÿæˆä¸€å¼ æ•°å­—ä¸å›¾ç‰‡ï¼Œæ•°å­—ä¸ç±»åˆ«ä¸€ä¸€å¯¹åº”çš„è¡¨æ ¼ï¼Œæ¯”è¾ƒç›´è§‚ã€‚ä¸Šè¯‰æ–¹æ³•åˆ™æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯å®¹æ˜“æ··ä¹±ã€‚å› æ­¤å°†å­—å…¸ç»“æ„èµ‹å€¼ç»™ä¸‰é‡æ•°ç»„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># all_detections : [img1[label1],[label2]..] ; img2: label1,label2...</span></span><br><span class="line">all_detections = [[<span class="keyword">None</span> <span class="keyword">for</span> i <span class="keyword">in</span> boxes_label_scores[img].keys()] <span class="keyword">for</span> img <span class="keyword">in</span> boxes_label_scores.keys()]</span><br><span class="line"></span><br><span class="line">    <span class="comment">#inds_keys = list(img_name.keys()) # [img1,img2,...n-1]</span></span><br><span class="line">inds = img_name.keys() <span class="comment"># å……å½“å›¾ç‰‡çš„idï¼Œä¸å›¾ç‰‡ä¸€ä¸€å¯¹åº”</span></span><br><span class="line"><span class="comment"># indä¸å›¾ç‰‡è·¯å¾„ä¸€ä¸€å¯¹åº”</span></span><br><span class="line"><span class="keyword">for</span> ind,img <span class="keyword">in</span> (enumerate(inds)): <span class="comment"># æ¯æ¬¡å¾—åˆ°img_name å³å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">    <span class="comment"># index ä¸labelä¸€ä¸€å¯¹åº”</span></span><br><span class="line">    <span class="keyword">for</span> index,label <span class="keyword">in</span> enumerate(boxes_label_scores[img].keys()):</span><br><span class="line">        all_detections[ind][index] = boxes_label_scores[img][label]     <span class="comment">## indä¸ºå›¾ç‰‡ï¼Œindexä¸ºç±»åˆ«ï¼Œä»0å¼€å§‹</span></span><br><span class="line"><span class="keyword">return</span> all_detections</span><br></pre></td></tr></table></figure>
<p><strong>è®¡ç®—precisionï¼Œrecall</strong></p>
<p>ç”Ÿæˆæ•°æ®ä¹‹åéœ€è¦æ ¹æ®æ•°æ®å»è®¡ç®—TPï¼ŒFPï¼ŒTNï¼ŒFNç­‰å‚æ•°ã€‚ä¸€ä¸ªç›´è§‚çš„æƒ³æ³•å°±æ˜¯å¤§å¾ªç¯æ˜¯ä¸ªlabelï¼Œç„¶åæ¯æ¬¡ç®—å‡ºä¸€ä¸ªç±»çš„APä¹‹åï¼Œä¿å­˜ä¸€ä¸‹ï¼Œå¾ªç¯ç»“æŸäº†ç®—ä¸€ä¸ªå¹³å‡ã€‚</p>
<p>è®¡ç®—precisionå³è®¡ç®—é¢„æµ‹è¾¹æ¡†ä¸­çœŸæ­£é¢„æµ‹å¯¹çš„éƒ¨åˆ†å é¢„æµ‹ä¸ºçœŸçš„ä¸ªæ•°ã€‚è®¡ç®—recallå³è®¡ç®—é¢„æµ‹è¾¹æ¡†ä¸­TPä¸æ€»çš„GTçš„æ¯”ä¾‹ã€‚å› æ­¤æˆ‘ä»¬ä»¥labelä¸ºå¤§å¾ªç¯ï¼Œä¸€æ¬¡å»éå†æ¯ä¸€å¼ å›¾ç‰‡ï¼Œç„¶åå»æ›´æ–°TPï¼ŒFPçš„å€¼ã€‚å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">inds = list(range(len(img_name.keys()))) <span class="comment"># å……å½“å›¾ç‰‡çš„idï¼Œä¸å›¾ç‰‡ä¸€ä¸€å¯¹åº”</span></span><br><span class="line">    <span class="keyword">for</span> label <span class="keyword">in</span> range(class_num): <span class="comment"># </span></span><br><span class="line">        false_positives = np.zeros((<span class="number">0</span>,))  <span class="comment"># precision = TP/ï¼ˆTP+FPï¼‰Recall = TP/ï¼ˆTP+FNï¼‰</span></span><br><span class="line">        true_positives  = np.zeros((<span class="number">0</span>,))</span><br><span class="line">        scores          = np.zeros((<span class="number">0</span>,))</span><br><span class="line">        num_annotations = <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> inds:</span><br><span class="line">            detections           = all_detections[i][label]   <span class="comment"># imageï¼šiï¼Œclassï¼šlabel</span></span><br><span class="line">            annotations          = all_annotations[i][label]</span><br><span class="line">            num_annotations     += len(annotations)   <span class="comment">#.shape[0]       # boxesçš„ä¸ªæ•°</span></span><br><span class="line">            detected_annotations = []</span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> detections:</span><br><span class="line">                scores = np.append(scores, float(d[<span class="number">4</span>]))</span><br><span class="line">                <span class="comment">#if annotations.shape[0] == 0:</span></span><br><span class="line">                <span class="keyword">if</span> len(annotations) == <span class="number">0</span>: <span class="comment"># é¢„æµ‹ä¸ºçœŸï¼Œä½†è¿™ä¸ªlabelçš„ä¸ªæ•°æ˜¯0</span></span><br><span class="line">                    false_positives = np.append(false_positives, <span class="number">1</span>)</span><br><span class="line">                    true_positives  = np.append(true_positives, <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                overlaps            = compute_overlap(np.expand_dims(d, axis=<span class="number">0</span>), annotations)</span><br><span class="line">                assigned_annotation = np.argmax(overlaps, axis=<span class="number">1</span>)</span><br><span class="line">                max_overlap         = overlaps[<span class="number">0</span>, assigned_annotation]</span><br><span class="line">                <span class="keyword">if</span> max_overlap &gt;= iou_threshold \</span><br><span class="line">                   <span class="keyword">and</span> assigned_annotation <span class="keyword">not</span> <span class="keyword">in</span> detected_annotations: <span class="comment"># IoUæ»¡è¶³æ¡ä»¶ï¼Œåˆ†é…çš„æ ‡æ³¨æ²¡æœ‰è¢«æ ‡æ³¨è¿‡</span></span><br><span class="line">                    false_positives = np.append(false_positives, <span class="number">0</span>)     <span class="comment"># FP += 0</span></span><br><span class="line">                    true_positives  = np.append(true_positives, <span class="number">1</span>)      <span class="comment"># TP += 1</span></span><br><span class="line">                  detected_annotations.append(assigned_annotation) </span><br><span class="line">                <span class="keyword">else</span>:                                                   <span class="comment"># æ ‡æ³¨å·²ç»ä½¿ç”¨è¿‡</span></span><br><span class="line">                    false_positives = np.append(false_positives, <span class="number">1</span>) </span><br><span class="line">                    true_positives  = np.append(true_positives, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œfalse_positivesä¸true_positiveså¹¶ä¸æ˜¯ç›´æ¥ç®—ä¸ªå’Œï¼Œè€Œæ˜¯å°†æ¯ä¸€å¼ å›¾ç‰‡æ˜¯å¦ä¸ºTPï¼ŒFPæŒ‰ç…§1ï¼Œ0ä¿ç•™ä¸‹æ¥ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">false_positives = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>] <span class="comment"># ä¸‹æ ‡è¡¨ç¤ºå›¾ç‰‡çš„åºå·ï¼Œ0è¡¨ç¤ºå¦ï¼Œ1è¡¨ç¤ºçœŸ</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å­˜å‚¨çš„å¥½å¤„åœ¨äºéšåè®¡ç®—APï¼ˆPRæ›²çº¿ä¸‹æ–¹é¢ç§¯ï¼‰æ—¶ï¼Œæ–¹ä¾¿è®¡ç®—ã€‚</p>
<h3 id="è®¡ç®—å•ä¸ª-labelçš„AP"><a href="#è®¡ç®—å•ä¸ª-labelçš„AP" class="headerlink" title="è®¡ç®—å•ä¸ª labelçš„AP"></a>è®¡ç®—å•ä¸ª labelçš„AP</h3><p>ä¸Šä¸€ä¸ªéƒ¨åˆ†ä»£ç å¾—åˆ°äº†æ¯å¼ å›¾ç‰‡çš„PRå€¼ç»“æœã€‚è®¡ç®—APå€¼å³ç®—PRæ›²çº¿çš„ä¸‹æ–¹é¢ç§¯ï¼Œå› ä¸ºä¸èƒ½ç›´æ¥ç®—ç§¯åˆ†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æƒ³æƒ³åŠæ³•ã€‚PRå›¾æ˜¯ä¸€å¼ recallä¸ºxè½´ï¼Œprecisionä¸ºyè½´çš„æ›²çº¿ï¼Œéšç€å›¾ç‰‡è¿›è¡Œå åŠ ï¼Œåˆ†åˆ«è®¡ç®—å‡ºPï¼ŒRå€¼ï¼Œç„¶åç»˜åˆ¶å‡ºæ›²çº¿ã€‚ä¸ºäº†ä¿è¯PRå€¼å°½é‡å‡†ç¡®ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹å›¾ç‰‡è¿›è¡Œç½®ä¿¡åº¦ä»é«˜åˆ°ä½çš„ä¸€ä¸ªæ’åºï¼Œç„¶åç´¯åŠ è®¡ç®—å…¶PRå€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># no annotations -&gt; AP for this class is 0 (is this correct?)</span></span><br><span class="line"><span class="keyword">if</span> num_annotations == <span class="number">0</span>:</span><br><span class="line">    average_precisions[label] = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># sort by score</span></span><br><span class="line">indices         = np.argsort(-scores)</span><br><span class="line">false_positives = false_positives[indices] </span><br><span class="line">true_positives  = true_positives[indices]</span><br><span class="line"></span><br><span class="line"><span class="comment"># compute false positives and true positives</span></span><br><span class="line">false_positives = np.cumsum(false_positives) <span class="comment"># ä¾æ¬¡ç´¯åŠ </span></span><br><span class="line">true_positives  = np.cumsum(true_positives)</span><br><span class="line"></span><br><span class="line"><span class="comment"># compute recall and precision num_annotationsä¹Ÿæ˜¯æ®å›¾ç‰‡ç´¯åŠ çš„</span></span><br><span class="line">recall    = true_positives / num_annotations</span><br><span class="line">precision = true_positives / np.maximum(true_positives + false_positives, np.finfo(np.float64).eps)</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¯‰ä»£ç é¦–å…ˆæ ¹æ®scoreså¯¹PRå€¼è¿›è¡Œæ’åºï¼Œç„¶åå¯¹æ¯å¼ å›¾ç‰‡ä»1â€¦nç´¯åŠ è®¡ç®—å‡ºTPï¼ŒFPå€¼ï¼Œå› æ­¤æœ€ç»ˆå¾—åˆ°çš„TPï¼ŒFPä¹Ÿæ˜¯ä¸€ä¸ªé•¿åº¦ä¸ºå›¾ç‰‡ä¸ªæ•°çš„æ•°ç»„ã€‚</p>
<p>è®¡ç®—APçš„æ–¹æ³•ï¼š</p>
<p>è®¡ç®—APé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯07å¹´ä»¥å‰çš„11ç‚¹æ³•ï¼Œç¬¬äºŒç§æ˜¯åˆ™æ˜¯å¯¹æ¯ä¸€ä¸ªç‚¹éƒ½è®¡ç®—å·®å€¼ã€‚</p>
<h4 id="Calculating-the-interpolation-performed-in-all-points"><a href="#Calculating-the-interpolation-performed-in-all-points" class="headerlink" title="Calculating the interpolation performed in all points"></a><a href="https://github.com/rafaelpadilla/Object-Detection-Metrics" target="_blank" rel="noopener">Calculating the interpolation performed in all points</a></h4><p>è¯¥éƒ¨åˆ†å‚è€ƒgithubä¸Šçš„è®²è§£ã€‚å…ˆçœ‹å›¾ï¼Œå¯¹äºPrecisionä¸Recallçš„æ’å€¼å¦‚ä¸‹ï¼Œ</p>
<p><img src="../images/trick/AP1.png" alt=""></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºprecisionæ¥è¯´ï¼Œä»æœ«å°¾å¼€å§‹ï¼Œprecisionæ¯ä¸ªç‚¹çš„å–å€¼éƒ½ç­‰äºå…¶å‰ä¸€ä¸ªç‚¹ä¸å½“å‰ç‚¹çš„æœ€å¤§å€¼ï¼Œå³<code>mpre[i - 1] = np.maximum(mpre[i - 1], mpre[i])</code>ã€‚å½“é‡åˆ°æ›´å¤§çš„precisionæ—¶ï¼Œé‡æ–°å¼€å§‹é‡å¤ä¸Šé¢è®¡ç®—ï¼Œå¾—åˆ°è®¸å¤šçŸ©å½¢æ¡†å¦‚ä¸‹,è®¡ç®—è¯¥é¢ç§¯å³å¯ï¼š</p>
<p><img src="../images/trick/AP2.png" alt=""></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_compute_ap</span><span class="params">(recall, precision)</span>:</span></span><br><span class="line">    <span class="string">""" Compute the average precision, given the recall and precision curves.</span></span><br><span class="line"><span class="string">    Code originally from https://github.com/rbgirshick/py-faster-rcnn.</span></span><br><span class="line"><span class="string">    # Arguments</span></span><br><span class="line"><span class="string">        recall:    The recall curve (list).</span></span><br><span class="line"><span class="string">        precision: The precision curve (list).</span></span><br><span class="line"><span class="string">    # Returns</span></span><br><span class="line"><span class="string">        The average precision as computed in py-faster-rcnn.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># correct AP calculation</span></span><br><span class="line">    <span class="comment"># first append sentinel values at the end</span></span><br><span class="line">    mrec = np.concatenate(([<span class="number">0.</span>], recall, [<span class="number">1.</span>]))</span><br><span class="line">    mpre = np.concatenate(([<span class="number">0.</span>], precision, [<span class="number">0.</span>]))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># compute the precision envelope</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(mpre.size - <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>):</span><br><span class="line">        mpre[i - <span class="number">1</span>] = np.maximum(mpre[i - <span class="number">1</span>], mpre[i])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># to calculate area under PR curve, look for points</span></span><br><span class="line">    <span class="comment"># where X axis (recall) changes value</span></span><br><span class="line">    i = np.where(mrec[<span class="number">1</span>:] != mrec[:<span class="number">-1</span>])[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># and sum (\Delta recall) * prec</span></span><br><span class="line">    ap = np.sum((mrec[i + <span class="number">1</span>] - mrec[i]) * mpre[i + <span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> ap</span><br></pre></td></tr></table></figure>
<h3 id="è®¡ç®—IoU"><a href="#è®¡ç®—IoU" class="headerlink" title="è®¡ç®—IoU"></a>è®¡ç®—IoU</h3><p>å½“æˆ‘ä»¬åœ¨è®¡ç®—Precisionä¸Recallçš„æ—¶å€™éœ€è¦åˆ¤æ–­æ ·æœ¬æ˜¯å¦æ˜¯çœŸæ ·æœ¬ï¼Œå› æ­¤éœ€è¦è®¡ç®—IoUå€¼ï¼Œè®¡ç®—IoUçš„å¤§è‡´æ€è·¯å¦‚ä¸‹ï¼Œé¦–å…ˆå¯¹ä¸€å¼ å›¾ç‰‡ï¼Œæ‹¿åˆ°ä¸€ä¸ªç½®ä¿¡åº¦æœ€é«˜çš„è¾¹æ¡†ï¼Œç„¶åå¯¹è¯¥è¾¹æ¡†ä¸è¯¥å›¾ç‰‡æ‰€æœ‰çš„GTè¾¹æ¡†éƒ½è®¡ç®—ä¸€ä¸ªIoUï¼Œé€‰å‡ºä¸€ä¸ªIoUå€¼æœ€å¤§çš„GTè¾¹æ¡†ä½œä¸ºä¸è¯¥è¾¹æ¡†åŒ¹é…çš„è¾¹æ¡†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> compute_overlap</span><br><span class="line">overlaps            = compute_overlap(np.expand_dims(d, axis=<span class="number">0</span>), annotations)</span><br><span class="line">                assigned_annotation = np.argmax(overlaps, axis=<span class="number">1</span>)</span><br><span class="line">                max_overlap         = overlaps[<span class="number">0</span>, assigned_annotation]</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­compute_overlapåº“æ˜¯ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œå³ä¸ºä¸€ä¸ª.soæ–‡ä»¶ï¼Œé€šè¿‡.cæ–‡ä»¶ç¼–è¯‘è€Œæ¥ã€‚<a href="https://github.com/fizyr/keras-retinanet/blob/master/keras_retinanet/utils/compute_overlap.pyx" target="_blank" rel="noopener">overlapä»£ç githubåœ°å€</a>ã€‚ç®—æ³•å°±æ˜¯é‚£æ ·äº†ï¼Œretina-netä½œè€…å·æ‡’ï¼Œç›´æ¥ç”¨äº†fast rcnnçš„ä»£ç ï¼Œæˆ‘ä¹Ÿå·ä¸ªæ‡’ğŸ˜‚ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ¯å½“ä¸€ä¸ªGTè¾¹æ¡†è¢«ä½¿ç”¨è¿‡ä¹‹åï¼Œéœ€è¦å°†å…¶æ ‡è®°ä¸€ä¸‹ï¼Œé¿å…ä¸‹æ¬¡é‡å¤è®¡ç®—ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ±‚mAPçš„æ–¹æ³•éœ€è¦é€šè¿‡é¢„æµ‹ç½‘ç»œæå‰ç”Ÿæˆæµ‹è¯•é›†çš„boxï¼Œç„¶åå°†pred_csv, GT_csvä¼ å…¥æ–¹æ³•ä¸­ï¼Œæœ€ç»ˆæ±‚è¿”å›æ¯ä¸ªç±»åˆ«çš„APã€‚</p>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>WenHui Zhou</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="/2019/03/22/æ‰‹æ’•mAP/">https://wenhui-zhou.github.io/2019/03/22/æ‰‹æ’•mAP/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>| æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="&quot;http://creativecommons.org/licenses/by-nc-sa/3.0/cn/&quot;" rel="&quot;external" nofollow&quot;="" target="&quot;_blank&quot;">CC BY-NC-SA 3.0 CN</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼ </li></ul></div><br><div class="tags"><a href="/tags/æ·±åº¦å­¦ä¹ /">æ·±åº¦å­¦ä¹ </a></div><div class="post-nav"><a class="pre" href="/2019/03/29/SSD-å¤ç°/">SSD å¤ç°</a><a class="next" href="/2019/03/20/python-Tip/">python Tip</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'civq9nKD49NpRALooR9Llqmf-gzGzoHsz',
  appKey:'JggO9HaSi1Lfx17nt16oDfsI',
  placeholder:'Shall we talk',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/3Dé‡å»º/">3Dé‡å»º</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac/">Mac</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tensorflow/">Tensorflow</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/effectie-cpp/">effectie cpp</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/effective-cpp/">effective cpp</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/super-resolution/">super resolution</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">tool</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/xigua/">xigua</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/å»ºç«™/">å»ºç«™</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ‰‹æ’•ç³»åˆ—/">æ‰‹æ’•ç³»åˆ—</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ¨èç³»ç»Ÿ/">æ¨èç³»ç»Ÿ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ¨¡å‹è¯„ä»·/">æ¨¡å‹è¯„ä»·</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ¯”èµ›/">æ¯”èµ›</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç®—æ³•æ‰«ç›²/">ç®—æ³•æ‰«ç›²</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç¼–ç¨‹/">ç¼–ç¨‹</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/è®ºæ–‡å¤ç°/">è®ºæ–‡å¤ç°</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/è®ºæ–‡é˜…è¯»/">è®ºæ–‡é˜…è¯»</a><span class="category-list-count">22</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/è®ºæ–‡é˜…è¯»/3Dé‡å»º/">3Dé‡å»º</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/é¡¹ç›®/">é¡¹ç›®</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/é¡¹ç›®æ€»ç»“/">é¡¹ç›®æ€»ç»“</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/é¡¹ç›®æ€»ç»“/è®ºæ–‡é˜…è¯»/">è®ºæ–‡é˜…è¯»</a><span class="category-list-count">3</span></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/interview/" style="font-size: 15px;">interview</a> <a href="/tags/dialog/" style="font-size: 15px;">dialog</a> <a href="/tags/c/" style="font-size: 15px;">c++</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/é¡¹ç›®æ€»ç»“/" style="font-size: 15px;">é¡¹ç›®æ€»ç»“</a> <a href="/tags/3Dé‡å»º/" style="font-size: 15px;">3Dé‡å»º</a> <a href="/tags/è®ºæ–‡é˜…è¯»/" style="font-size: 15px;">è®ºæ–‡é˜…è¯»</a> <a href="/tags/netStation/" style="font-size: 15px;">netStation</a> <a href="/tags/SR/" style="font-size: 15px;">SR</a> <a href="/tags/æ·±åº¦å­¦ä¹ /" style="font-size: 15px;">æ·±åº¦å­¦ä¹ </a> <a href="/tags/tip/" style="font-size: 15px;">tip</a> <a href="/tags/tool/" style="font-size: 15px;">tool</a> <a href="/tags/Tensorflow/" style="font-size: 15px;">Tensorflow</a> <a href="/tags/learning-cpp/" style="font-size: 15px;">learning cpp</a> <a href="/tags/èŒä¸šè§„åˆ’/" style="font-size: 15px;">èŒä¸šè§„åˆ’</a> <a href="/tags/â€”-leetcode/" style="font-size: 15px;">â€” leetcode</a> <a href="/tags/tips/" style="font-size: 15px;">tips</a> <a href="/tags/ç®—æ³•/" style="font-size: 15px;">ç®—æ³•</a> <a href="/tags/è¶…åˆ†è¾¨ç‡/" style="font-size: 15px;">è¶…åˆ†è¾¨ç‡</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/11/16/effective-cpp-å…­-ç»§æ‰¿ä¸é¢å‘å¯¹è±¡è®¾è®¡/">effective cpp(å…­) ç»§æ‰¿ä¸é¢å‘å¯¹è±¡è®¾è®¡</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/10/effective-cpp-äº”-å®ç°/">effective cpp(äº”) å®ç°</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/09/effective-cpp-å››-è®¾è®¡ä¸å£°æ˜/">effective cpp(å››) è®¾è®¡ä¸å£°æ˜</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/06/EncNetç»“åˆä¸Šä¸‹æ–‡çš„è¯­ä¹‰åˆ†å‰²/">EncNetç»“åˆä¸Šä¸‹æ–‡çš„è¯­ä¹‰åˆ†å‰²</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/06/æ¨èç³»ç»Ÿä¹‹è¯„åˆ†é¢„æµ‹ï¼ˆä¸‰ï¼‰/">æ¨èç³»ç»Ÿä¹‹è¯„åˆ†é¢„æµ‹ï¼ˆä¸‰ï¼‰</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/05/effective-cpp-ä¸‰-èµ„æºç®¡ç†/">effective cpp(ä¸‰) èµ„æºç®¡ç†</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/05/æ¨èç³»ç»Ÿä¹‹ç”¨æˆ·æ ‡ç­¾æ•°æ®-äºŒ/">æ¨èç³»ç»Ÿä¹‹ç”¨æˆ·æ ‡ç­¾æ•°æ®(äºŒ)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/02/effective-cpp-äºŒ-æ„é€ ã€ææ„ã€èµ‹å€¼è¿ç®—/">effective cpp (äºŒ) æ„é€ ã€ææ„ã€èµ‹å€¼è¿ç®—</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/02/æ¨èç³»ç»Ÿä¹‹ååŒè¿‡æ»¤ï¼ˆä¸€ï¼‰/">æ¨èç³»ç»Ÿä¹‹ååŒè¿‡æ»¤ï¼ˆä¸€ï¼‰</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/31/effective-cpp-ï¼ˆä¸€ï¼‰-è®©è‡ªå·±ä¹ æƒ¯cpp/">effective cpp(ä¸€) è®©è‡ªå·±ä¹ æƒ¯cpp</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://github.com/WenHui-Zhou" title="GITHUB" target="_blank">GITHUB</a><ul></ul><a href="http://www.google.com/" title="GOOGLE" target="_blank">GOOGLE</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2019 <a href="/." rel="nofollow">WenHuiZhou.</a> è®¿é—®äººæ•°:<span id="busuanzi_value_site_uv"></span> 
è®¿é—®é‡:<span id="busuanzi_value_site_pv"></span></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> </div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>